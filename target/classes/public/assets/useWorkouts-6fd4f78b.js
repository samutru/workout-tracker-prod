import{g as I,a as b,c as T,b as M,d as C}from"./workouts-385c1c0a.js";import{r,a5 as S,a6 as D,o as m,Q as F}from"./index-387aea29.js";function B(){const d=r([]),v=r({}),c=r(new Date),f=S(),s=r([]),k=D(),n=r();m(async()=>{const{id:e}=k.params;if(e)try{v.value=await I(Number(e))}catch(o){console.log(o)}});const g=F(()=>c.value?c.value.toISOString().substring(0,16).replace("T"," "):""),l=async()=>{try{d.value=await b()}catch(e){console.log(e)}};m(l);const p=async()=>{if(c.value){let e={dateOfWorkout:new Date(c.value)};try{let o=await T(e);l(),f.push("/tabs/addExercises/"+o.id)}catch(o){console.log(o)}}},w=(e,o)=>{s.value.push({name:e,id:o,exerciseId:Math.random(),time:0})},W=e=>{s.value=s.value.filter(o=>o.exerciseId!==e)},h=(e,o)=>{y(e,o.target.value)},y=(e,o)=>{const t=s.value.findIndex(u=>u.exerciseId===e);t!==-1&&(s.value[t].time=o)},E=async e=>{if(!s.value.length)n.value=!0;else{n.value=!1;const o=s.value.map(t=>({reps:0,exerciseTime:t.time,exerciseInfo:{id:t.id}}));try{if(e!==null){let t=await M(o,e);f.push("/tabs/workout/"+e)}else console.log("workoutId.value is null")}catch(t){console.log(t)}}},x=r(!1),a=r(),i=r([]);return{showExercises:x,selectedWorkout:a,exercisesForWorkout:i,workouts:d,currentWorkout:v,selectedExercises:s,dateTime:g,noExercisesSelected:n,openCloseModal:async(e,o)=>{var t,u;x.value=e,a.value=o,e&&((t=a.value)!=null&&t.id)&&a!=null?i.value=await C((u=a.value)==null?void 0:u.id):i.value=[]},getWorkouts:l,saveWorkout:p,startWorkout:E,addExercise:w,removeExercise:W,onIonChange:h}}export{B as u};
